<head>
  <title>Leaderboard</title>
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <link href='https://fonts.googleapis.com/css?family=PT+Sans+Narrow' rel='stylesheet' type='text/css'>
</head>
<body>{{>base}}</body>

<template name="base">
  <main class="content">
    <div class="row fill-space">
      <div class="col-md-6">
        {{>socket name="commands"}}
      </div>
      <div class="col-md-6">
        {{>socket name="messages"}}
      </div>
    </div>
  </main>
  <footer class="galil-commands">
    {{>subroutines}}
    {{>console}}
  </footer>
</template>

<template name="subroutines">
  <div class="row">
    <div class="col-md-12">
      <button data-action="startup" class="btn btn-lg btn-block btn-primary">Initiate Startup Subroutine</button>
    </div>
  </div>
</template>

<template name="console">
  <form id="command-form">
    <div class="input-group">
      <span class="input-group-addon" id="basic-addon1"></span>
      <input type="text" class="form-control" placeholder="Enter command" aria-describedby="basic-addon1" disabled="{{ galilDisconnected }}">
    </div>
  </form>
</template>

<template name="socket">
  {{#if Template.subscriptionsReady}}
    {{#with socket name}}
      <div class="panel panel-default socket">
        <div class="panel-heading">
          {{name}}
          <span class="badge">{{connection.status}}</span>
        </div>
        <div class="panel-body">
          {{#each messages}}
            <div class="event {{event}}">
              {{message}}
            </div>
          {{/each}}
        </div>
      </div>
    {{/with}}
  {{else}}
    {{>spinner}}
  {{/if}}
</template>

